/***********************************************************************************************//**
 * \file   readfile.c
 * \brief  Read-File code
 ***************************************************************************************************
 * 
 **************************************************************************************************/

/* standard library headers */
#include<stdio.h>

#include "readfile.h"



static char path[] = "/root/node/artik-GW-api/Uploads/image.txt";

/***************************************************************************************************
 * Function Definitions
 **************************************************************************************************/

/***********************************************************************************************//**
 * \brief Function 
 **************************************************************************************************/


int readFile(unsigned char *p){

	FILE *fp = fopen(path,"r");
    if (fp == NULL) {
        fprintf(stderr, "Error READING FILE: %s", path);
        return 1;
    }
    unsigned char c1,c2;
    int i=0;
    unsigned char sum;
    for(i=0;i<Image_Size;i++)
    {
            c1 = ascii_to_hex(fgetc(fp));
            c2 = ascii_to_hex(fgetc(fp));
            sum = c1<<4 | c2;
            p[i] = sum;
    }
    return 0;

}


/***********************************************************************************************//**
 * \brief Function 
 **************************************************************************************************/
int ascii_to_hex(char c)
{
        int num = (int) c;
        if(num < 58 && num > 47)
        {
                return num - 48; 
        }
        if(num < 103 && num > 96)
        {
                return num - 87;
        }
        return num;
}